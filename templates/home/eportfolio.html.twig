{% extends 'base.html.twig' %}

{% block title %}Mes Réalisations - DA BOIT Maxence{% endblock %}

{% block stylesheets %}
<style>
    /* Configuration de la grille */
    .portfolio-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
        gap: 2rem;
        padding-bottom: 4rem;
    }

    /* Style de la carte */
    .project-card {
        background: rgba(255, 255, 255, 0.6);
        backdrop-filter: blur(12px);
        border: 1px solid rgba(255, 255, 255, 0.4);
        border-radius: 24px;
        overflow: hidden;
        transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        height: 100%;
        display: flex;
        flex-direction: column;
        text-decoration: none;
        color: var(--text-primary);
    }

    .project-card:hover {
        transform: translateY(-10px) scale(1.02);
        background: rgba(255, 255, 255, 0.85);
        box-shadow: 0 20px 40px rgba(0,0,0,0.1);
    }

    /* Image */
    .card-img-container {
        height: 200px;
        overflow: hidden;
        position: relative;
    }
    .card-img { width: 100%; height: 100%; object-fit: cover; transition: transform 0.6s ease; }
    .project-card:hover .card-img { transform: scale(1.1); }

    /* Badge TYPE (SAE vs TP) */
    .type-badge {
        position: absolute;
        top: 1rem;
        right: 1rem;
        padding: 0.4rem 1rem;
        border-radius: 50px;
        font-weight: 800;
        font-size: 0.8rem;
        box-shadow: 0 4px 10px rgba(0,0,0,0.15);
        text-transform: uppercase;
        letter-spacing: 0.5px;
        color: white;
    }

    /* Couleurs spécifiques */
    .badge-default { background: linear-gradient(135deg, #6c757d, #495057); } /* Gris pour TP */
    .badge-sae { background: linear-gradient(135deg, #5227FF, #3a16cc); }     /* Bleu/Violet pour SAE */

    .card-content { padding: 1.5rem; display: flex; flex-direction: column; flex-grow: 1; }
    .card-title { font-size: 1.3rem; font-weight: 800; margin-bottom: 0.5rem; }
    .card-desc { color: var(--text-secondary); font-size: 0.95rem; margin-bottom: 1.5rem; flex-grow: 1; }
    
    .tech-tags { display: flex; flex-wrap: wrap; gap: 0.5rem; margin-top: auto; }
    .tech-tag { font-size: 0.75rem; background: rgba(0,0,0,0.05); padding: 0.3rem 0.8rem; border-radius: 6px; font-weight: 600; color: #555; }
</style>
{% endblock %}

{% block body %}
<div class="container-custom py-5">
    
    {# Header modifiée sans mention des stages #}
    <div class="d-flex flex-column align-items-center text-center mb-5">
        <h1 class="display-4 fw-bold">Mes Réalisations</h1>
        <p class="text-secondary" style="max-width: 600px;">
            Un aperçu de mon parcours en BUT R&T à travers mes <span class="fw-bold text-dark">SAE</span> et mes <span class="fw-bold text-dark">TPs</span> significatifs.
        </p>
    </div>

    <div class="portfolio-grid">

        {% for project in projects %}
            <a href="{{ path('app_project_detail', {id: project.id}) }}" class="project-card">
                
                <div class="card-img-container">
                    <img src="{{ asset('Image/' ~ project.imageFilename) }}" alt="{{ project.title }}" class="card-img">
                    
                    {# Logique simplifiée : SAE ou TP (Défaut) #}
                    {% set badgeClass = 'badge-default' %}
                    {% if 'SAE' in project.category %}
                        {% set badgeClass = 'badge-sae' %}
                    {% endif %}

                    <span class="type-badge {{ badgeClass }}">
                        {{ project.category }}
                    </span>
                </div>

                <div class="card-content">
                    <h3 class="card-title">{{ project.title }}</h3>
                    <p class="card-desc">{{ project.description }}</p>
                    
                    <div class="tech-tags">
                        {% for tech in project.technologies|slice(0, 3) %}
                            <span class="tech-tag">{{ tech }}</span>
                        {% endfor %}
                    </div>
                </div>
            </a>
        {% endfor %}

        {# Carte Placeholder "A venir" #}
        <div class="project-card" style="background: transparent; border: 2px dashed #ccc; align-items: center; justify-content: center; min-height: 300px; cursor: default;">
            <div class="text-center p-4">
                <i class="fas fa-school fa-3x mb-3 text-muted"></i>
                <h4 class="fw-bold text-muted">Prochaine SAE</h4>
                <p class="small text-muted">Semestre suivant...</p>
            </div>
        </div>

    </div>
</div>
{% endblock %}